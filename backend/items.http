### Items API Tests

### Variáveis
@baseUrl = http://localhost:3000
@token = {{login.response.body.access_token}}

### Login (para obter token)
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

### Criar item
# @name createItem
POST {{baseUrl}}/items
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "imageUrl": "https://example.com/image.jpg",
  "predictedCategoryId": "categoria-uuid-opcional",
  "confidence": 0.85
}

### Listar todos os itens do usuário
GET {{baseUrl}}/items
Authorization: Bearer {{token}}

### Listar itens com paginação
GET {{baseUrl}}/items?page=1&limit=5
Authorization: Bearer {{token}}

### Listar meus itens especificamente
GET {{baseUrl}}/items/my-items
Authorization: Bearer {{token}}

### Listar meus itens com paginação
GET {{baseUrl}}/items/my-items?page=1&limit=3
Authorization: Bearer {{token}}

### Buscar item por ID
# @name getItem
GET {{baseUrl}}/items/{{createItem.response.body.id}}
Authorization: Bearer {{token}}

### Atualizar item
PATCH {{baseUrl}}/items/{{createItem.response.body.id}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "imageUrl": "https://example.com/new-image.jpg",
  "confidence": 0.95
}

### Atualizar predição do item
PATCH {{baseUrl}}/items/{{createItem.response.body.id}}/prediction
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "predictedCategoryId": "nova-categoria-uuid",
  "confidence": 0.92
}

### Obter estatísticas do usuário
GET {{baseUrl}}/items/stats
Authorization: Bearer {{token}}

### Obter estatísticas globais (todos os usuários)
GET {{baseUrl}}/items/all-stats
Authorization: Bearer {{token}}

### Excluir item
DELETE {{baseUrl}}/items/{{createItem.response.body.id}}
Authorization: Bearer {{token}}

### Testes de erro - Tentar criar sem autenticação
POST {{baseUrl}}/items
Content-Type: application/json

{
  "imageUrl": "https://example.com/image.jpg"
}

### Testes de erro - URL inválida
POST {{baseUrl}}/items
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "imageUrl": "url-invalida",
  "confidence": 1.5
}

### Testes de erro - Confidence fora do range
POST {{baseUrl}}/items
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "imageUrl": "https://example.com/image.jpg",
  "confidence": 1.5
}

### Teste - Criar item sem campos opcionais
POST {{baseUrl}}/items
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "imageUrl": "https://example.com/simple-image.jpg"
}
