### Collection Points API Tests

### Variáveis
@baseUrl = http://localhost:3000
@token = {{login.response.body.access_token}}

### Login (para obter token)
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

### Criar ponto de coleta
# @name createCollectionPoint
POST {{baseUrl}}/collection-points
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Ponto de Coleta Teste",
  "lat": -29.4541,
  "lon": -51.9617,
  "address": "Rua das Flores, 123, Lajeado, RS",
  "contact": "(51) 99999-9999",
  "openingHours": "08:00 - 18:00",
  "categoryIds": []
}

### Listar todos os pontos de coleta
GET {{baseUrl}}/collection-points
Authorization: Bearer {{token}}

### Listar pontos de coleta com paginação
GET {{baseUrl}}/collection-points?page=1&limit=5
Authorization: Bearer {{token}}

### Buscar ponto de coleta por ID
# @name getCollectionPoint
GET {{baseUrl}}/collection-points/{{createCollectionPoint.response.body.id}}
Authorization: Bearer {{token}}

### Atualizar ponto de coleta
PUT {{baseUrl}}/collection-points/{{createCollectionPoint.response.body.id}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Ponto de Coleta Atualizado",
  "contact": "(51) 88888-8888",
  "openingHours": "07:00 - 19:00"
}

### Adicionar categoria ao ponto de coleta
POST {{baseUrl}}/collection-points/{{createCollectionPoint.response.body.id}}/categories
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "categoryId": "categoria-uuid-aqui"
}

### Remover categoria do ponto de coleta
DELETE {{baseUrl}}/collection-points/{{createCollectionPoint.response.body.id}}/categories/categoria-uuid-aqui
Authorization: Bearer {{token}}

### Excluir ponto de coleta
DELETE {{baseUrl}}/collection-points/{{createCollectionPoint.response.body.id}}
Authorization: Bearer {{token}}

### Testes de erro - Tentar criar sem autenticação
POST {{baseUrl}}/collection-points
Content-Type: application/json

{
  "name": "Ponto sem auth",
  "lat": -29.4541,
  "lon": -51.9617,
  "address": "Rua Teste, 456"
}

### Testes de erro - Dados inválidos
POST {{baseUrl}}/collection-points
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "",
  "lat": 200,
  "lon": -200,
  "address": ""
}
